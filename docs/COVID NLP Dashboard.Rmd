---
title: "COVID-19 NLP"
subtitle: Ayush Noori
output: 
  flexdashboard::flex_dashboard:
    vertical_layout: fill
    theme:
      bootswatch: minty
      primary: "#1d3557"
      secondary: "#e63946"
      navbar-bg: "#1d3557"
    social: menu
    source_code: https://github.com/ayushnoori/covid19-nlp
---


```{r global, include = FALSE}

# load flexdashboard library
library(flexdashboard)
library(bslib)

# load data in global chunk so it can be shared by all users of the dashboard
library(data.table)
library(purrr)
library(magrittr)
library(ggplot2)
library(stringr)
library(plotly)

# for icons
library(htmltools)
library(fontawesome)
htmltools::tagList(fontawesome::fa_html_dependency())

# read .RDS object
twt = readRDS("Final Parsed Tweets.RDS")
# twt = readRDS("docs/Final Parsed Tweets.RDS")
# times = as.ITime(word(twt$Date, 4))

```

<link rel="shortcut icon" href="docs/virus-favicon.svg">

About {data-orientation=rows data-icon="fa-info-circle"}
=====================================

Row
-----------------------------------------------------------------------

### Original Tweet Count {.value-box}

```{r original-count}

valueBox(value = "2,996,979", icon = "fa-twitter", color = "#DFF2F2",
           href = "https://www.twitter.com")

```

### Final Tweet Count {.value-box}

```{r final-count}

valueBox(value = "511,675", icon = "fa-filter", color = "#B8D0E0")

```

### Date Selected {.value-box}

```{r date-selected}

valueBox(value = "July 1st, 2021", icon = "fa-calendar", color = "#95B2DC")

```

Row {data-height=350}
-----------------------------------------------------------------------

### Methodology

Our project aimed to characterize the public opinion of the COVID-19 pandemic by applying machine learning on COVID-related tweets. Our methodology is detailed below:

1. We queried the pre-curated dataset of COVID-related tweets published by [Chen et al.](https://doi.org/10.2196/19273) in *JMIR* for those tweets posted on July 1st, 2021. A total of 2,996,979 tweets were identified.

2. We filtered this initial dataset for tweets which were written in the English language, and which were *not* retweets (i.e., were original content). The resulting 540,642 tweets were hydrated in Python using the Twitter API.

3. The 511,675 successfully hydrated tweets were parsed from JSON/HTML and cleaned in R, followed by feature extraction (e.g., hashtags, URLs, replies, retweets, location, etc.). 

4. Finally, we used natural language processing tools such as structural topic modeling to derive aggregate features from our dataset.

Analyses were performed in Python and R. All code is available via our [GitHub repository](https://github.com/ayushnoori/covid19-nlp).

Row {data-height=650}
-----------------------------------------------------------------------

### Retweeted Tweets

```{r retweeted-plot}

retweeted = ggplot(twt[RetweetCount != 0], aes(x = RetweetCount, fill = UserVerified)) +
  geom_histogram(position = "stack", bins = 20, color = "black") +
  scale_fill_manual(values = c("#C3CAD5", "#e63946")) +
  scale_x_log10() +
  labs(x = "Number of Retweets", y = "Count", fill = "Verified?") +
  theme_bw() +
  theme(axis.title.x = element_text(face = "bold"),
        axis.title.y = element_text(face = "bold"),
        legend.title = element_text(face = "bold"),
        legend.position = "bottom")

ggplotly(retweeted)

```

### Favorited Tweets

```{r favorited-plot}

favorited = ggplot(twt[FavoriteCount != 0], aes(x = FavoriteCount, fill = UserVerified)) +
  geom_histogram(position = "stack", bins = 20, color = "black") +
  scale_fill_manual(values = c("#C3CAD5", "#e63946")) +
  scale_x_log10() +
  labs(x = "Number of Times Favorited", y = "Count", fill = "Verified?") +
  theme_bw() +
  theme(axis.title.x = element_text(face = "bold"),
        axis.title.y = element_text(face = "bold"),
        legend.title = element_text(face = "bold"),
        legend.position = "bottom")

ggplotly(favorited)

```


Topics {.storyboard data-icon="fa-file-alt"}
=====================================

### Topic 1

```{r}

```

*** 

Some commentary about Topic 1.

### Topic 2

```{r}

```

*** 

Some commentary about Topic 2.